<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Junte UI</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <script>
    const themes = {dark: '156c58ca03', light: 'd685b2b465'};

    clearThemes = function () {
      const exist = document.head.querySelector(`style[theme="true"]`);
      if (exist) {
        document.head.removeChild(exist);
      }
    };

    setTheme = function (name) {
      const current = name || 'light';

      const request = new XMLHttpRequest();
      request.onreadystatechange = function () {
        if (this.readyState === 4 && this.status === 200) {
          clearThemes();
          const style = document.createElement('style');
          style.setAttribute('theme', 'true');
          style.innerHTML = this.responseText;
          document.head.appendChild(style);
          localStorage.setItem('theme', current);
        }
      };
      request.open("GET", `./assets/themes/${current}.${themes[current]}.css`, true);
      request.send();
    };

    setTheme(localStorage.theme);

    window.addEventListener('message', function (event) {
      if (event.data['type'] === 'theme') {
        setTheme(event.data['theme']);
      }
    }, false);
  </script>
</head>
<body>
<app-root></app-root>
</body>
</html>
