<jnt-container>
  <h1 i18n="@@label.popover">Popover</h1>
  <jnt-stack resources [type]="ui.layout.stack.type.horizontal">
    <jnt-link [icon]="ui.icons.gitlab"
              source="https://gitlab.com/junte/junte-ui/tree/master/projects/junte-ui/src/lib/components/overlays/popover"
              target="_blank" title="GitLab">
    </jnt-link>
    <jnt-link [icon]="ui.icons.figma"
              source="https://www.figma.com/file/EIUNwZCXL9Nm5BKQKl43mfDr/Junte-UI?node-id=56%3A9"
              target="_blank" title="Figma">
    </jnt-link>
  </jnt-stack>
  <h3 i18n="@@label.requirements">Requirements</h3>

  <ol>
    <li>The popover should have content (and title manually)</li>
    <li>The popover should listen to mouse hover, click or focus of host element</li>
    <li>The popover should use string or custom template for content or title</li>
    <li>The popover should open in one of 12 placements</li>
    <li>The popover should have mouse enter and leave delays</li>
  </ol>

  <jnt-tabs playground>
    <jnt-tab title="Preview"
             i18n-title="@@label.preview"
             [icon]="localUi.icons.preview">
      <ng-template #tabContentTemplate>
        <jnt-row>
          <jnt-col [tablet]="8">
            <app-browser-preview>
              <ng-template #document let-height="height">
                <jnt-stack [type]="ui.layout.stack.type.vertical">
                  <jnt-stack [type]="ui.layout.stack.type.horizontal">
                    <jnt-button [jntPopover]="{title: 'Title', contentTemplate: contentTemplate, trigger: ui.overlays.popover.trigger.click}"
                                text="Click me"
                                i18n-text="@@action.click_me">
                    </jnt-button>
                    <jnt-button [jntPopover]="{content: 'Without title & text only', trigger: ui.overlays.popover.trigger.click}"
                                text="Without title"
                                i18n-text="@@action.without_title">
                    </jnt-button>
                    <jnt-button [jntPopover]="{title: 'Custom', scheme: ui.scheme.primary, contentTemplate: contentTemplate, trigger: ui.overlays.popover.trigger.hover}"
                                text="Custom content"
                                i18n-text="@@action.custom_content">
                    </jnt-button>

                    <ng-template #contentTemplate>
                      <jnt-stack [type]="ui.layout.stack.type.vertical">
                        <span>It is custom content!</span>
                        <jnt-stack [type]="ui.layout.stack.type.horizontal">
                          <jnt-button text="Ok"
                                      i18n-text="@@action.ok"></jnt-button>
                          <jnt-button text="Cancel"
                                      i18n-text="@@action.cancel"></jnt-button>
                        </jnt-stack>
                      </jnt-stack>
                    </ng-template>
                  </jnt-stack>
                  <jnt-input [(ngModel)]="title"></jnt-input>
                  <jnt-button [jntPopover]="{title: title, content: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus, atque aut cum cupiditate dolor fugiat ipsa provident vel voluptates. Accusantium ducimus fuga nisi nulla possimus, saepe vel voluptatum. Eligendi, repellat.', trigger: ui.overlays.popover.trigger.hover}"
                              text="Changed title"
                              i18n-text="@@action.changed_title">
                  </jnt-button>
                </jnt-stack>
                <hr>
                <jnt-stack>

                <h4 i18n="@@label.placements">Placements</h4>
                  <jnt-stack [align]="ui.flex.align.stretch" placements>

                    <jnt-stack [type]="ui.layout.stack.type.horizontal" [justify]="ui.flex.justify.center" stack>
                      <ng-container
                        *ngFor="let pos of [ui.overlays.popover.position.topLeft, ui.overlays.popover.position.top, ui.overlays.popover.position.topRight]">
                        <jnt-button [size]="ui.size.large"
                                    [jntPopover]="{title: pos, content: lorem, trigger: ui.overlays.popover.trigger.hover, placement: pos}"
                                    [text]="pos">
                        </jnt-button>
                      </ng-container>
                    </jnt-stack>

                    <jnt-stack [type]="ui.orientation.horizontal" [justify]="ui.flex.justify.between" stack>
                      <ng-container *ngFor="let pos of [ui.overlays.popover.position.leftTop, ui.overlays.popover.position.rightTop]">
                        <jnt-button [size]="ui.size.large"
                                    [jntPopover]="{title: pos, content: lorem, trigger: ui.overlays.popover.trigger.hover, placement: pos}"
                                    [text]="pos">
                        </jnt-button>
                      </ng-container>
                    </jnt-stack>

                    <jnt-stack [type]="ui.orientation.horizontal" [justify]="ui.flex.justify.between" stack>
                      <ng-container *ngFor="let pos of [ui.overlays.popover.position.left, ui.overlays.popover.position.right]">
                        <jnt-button [size]="ui.size.large"
                                    [jntPopover]="{title: pos, content: lorem, trigger: ui.overlays.popover.trigger.hover, placement: pos}"
                                    [text]="pos">
                        </jnt-button>
                      </ng-container>
                    </jnt-stack>

                    <jnt-stack [type]="ui.orientation.horizontal" [justify]="ui.flex.justify.between" stack>
                      <ng-container *ngFor="let pos of [ui.overlays.popover.position.leftBottom, ui.overlays.popover.position.rightBottom]">
                        <jnt-button [size]="ui.size.large"
                                    [jntPopover]="{title: pos, content: lorem, trigger: ui.overlays.popover.trigger.hover, placement: pos}"
                                    [text]="pos">
                        </jnt-button>
                      </ng-container>
                    </jnt-stack>

                    <jnt-stack [type]="ui.layout.stack.type.horizontal" [justify]="ui.flex.justify.center" stack>
                      <ng-container
                        *ngFor="let pos of [ui.overlays.popover.position.bottomLeft, ui.overlays.popover.position.bottom, ui.overlays.popover.position.bottomRight]">
                        <jnt-button [size]="ui.size.large"
                                    [jntPopover]="{title: pos, content: lorem, trigger: ui.overlays.popover.trigger.hover, placement: pos}"
                                    [text]="pos">
                        </jnt-button>
                      </ng-container>
                    </jnt-stack>
                  </jnt-stack>
                </jnt-stack>
                <ng-template #lorem>
                  <div>
                    Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's
                    standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make
                    a type specimen book.
                  </div>
                </ng-template>
              </ng-template>
            </app-browser-preview>
          </jnt-col>

          <jnt-col [tablet]="4">
            <jnt-form [formGroup]="builder">
              <jnt-stack [align]="ui.flex.align.stretch">

                <jnt-form-item>
                  <jnt-form-label for="trigger"
                                  i18n="@@label.trigger_type">Trigger type</jnt-form-label>
                  <jnt-switcher formControlName="trigger">
                    <jnt-switcher-option label="Hover" [value]="triggerType.hover"></jnt-switcher-option>
                    <jnt-switcher-option label="Click" [value]="triggerType.click"></jnt-switcher-option>
                  </jnt-switcher>
                </jnt-form-item>

                <jnt-form-item>
                  <jnt-form-label for="type"
                                  i18n="@@label.content_type">Content type</jnt-form-label>
                  <jnt-switcher formControlName="type">
                    <jnt-switcher-option label="Default" [value]="contentType.default"></jnt-switcher-option>
                    <jnt-switcher-option label="Custom" [value]="contentType.custom"></jnt-switcher-option>
                  </jnt-switcher>
                </jnt-form-item>

                <jnt-form-item>
                  <jnt-form-label for="scheme"
                                  i18n="@@label.scheme">Scheme selecting</jnt-form-label>
                  <jnt-select formControlName="scheme">
                    <jnt-select-option *ngFor="let scheme of keys(schemas)" [value]="schemas[scheme]" [label]="scheme" [key]="scheme"></jnt-select-option>
                  </jnt-select>
                </jnt-form-item>

                <jnt-form-item>
                  <jnt-form-label for="layout"
                                  i18n="@@label.layout">Layout selecting</jnt-form-label>
                  <jnt-select formControlName="layout">
                    <jnt-select-option *ngFor="let layout of keys(layouts)" [value]="layouts[layout]" [label]="layout" [key]="layout"></jnt-select-option>
                  </jnt-select>
                </jnt-form-item>

                <jnt-form-item>
                  <jnt-form-control>
                    <jnt-checkbox formControlName="title"
                                  label="Title"
                                  i18n-label="@@label.title"></jnt-checkbox>
                  </jnt-form-control>
                </jnt-form-item>
              </jnt-stack>
            </jnt-form>
          </jnt-col>
        </jnt-row>
      </ng-template>
    </jnt-tab>

    <jnt-tab #code title="Code"
             i18n-title="@@label.code"
             [icon]="localUi.icons.code">
      <ng-template #tabContentTemplate>
        <jnt-accordion [active]="1">
          <jnt-accordion-section title="How to start"
                                 i18n-title="@@label.how_to_start">
            <ng-template #accordionContentTemplate>
              <app-how-to-use
                [test]="{selector:'popover-test', type: 'PopoverTestComponent'}"
                scss="overlays/popover"></app-how-to-use>
            </ng-template>
          </jnt-accordion-section>
          <jnt-accordion-section title="Component template"
                                 i18n-title="@@label.component_template">
            <ng-template #accordionContentTemplate>
              <app-code-highlight file="popover-test.template.html">
                <!-- @formatter:off-->
<![CDATA[
<jnt-button [jntPopover]= ]]><![CDATA["{]]>
<ng-container *ngIf="titleControl.value">
  <![CDATA[
  title: ]]>{{titleControl.value ? "'Title'" : null}}
  <![CDATA[,]]>
</ng-container>
<ng-container *ngIf="contentControl.value">
  <![CDATA[
  trigger: 'ui.overlays.popover.trigger.]]>{{triggerControl.value}}<![CDATA[',]]>
  <![CDATA[
  text: 'Any text']]>
  <![CDATA[}" >
 </jnt-button> ]]>
 <jnt-button [jntPopover]="{content: 'Without title', trigger: ui.overlays.popover.trigger.hover}"
             text="Without title">
 </jnt-button>
 <jnt-button [jntPopover]="{title: 'Mouse enter delay', content: 'Enter delay 1 sec',
      enterDelay: 1, trigger: ui.overlays.popover.trigger.hover}"
             text="Enter delay">
 </jnt-button>
 <jnt-button [jntPopover]="{title: 'Mouse leave delay', content: 'Leave delay 1 sec',
      leaveDelay: 1, trigger: ui.overlays.popover.trigger.hover}"
             text="Leave delay">
 </jnt-button>
 <jnt-button [jntPopover]="{title: 'Custom', content: content, trigger: ui.overlays.popover.trigger.hover}"
             text="Custom content">
 </jnt-button>

<ng-template #content>
   <jnt-stack [type]="ui.layout.stack.type.vertical">
      <jnt-link>"It is custom content!</jnt-link>
      <jnt-stack [type]="ui.layout.stack.type.horizontal">
        <jnt-button text="Ok"></jnt-button>
        <jnt-button text="Cancel"></jnt-button>
      </jnt-stack>
   </jnt-stack>
</ng-template>
    ]]>
                <!-- @formatter:on-->
              </app-code-highlight>
            </ng-template>
          </jnt-accordion-section>
        </jnt-accordion>
      </ng-template>
    </jnt-tab>

    <jnt-tab title="API" [icon]="localUi.icons.api">
      <ng-template #tabContentTemplate>
        <app-component-api selector="jnt-popover" [target]="types.popover"></app-component-api>
      </ng-template>
    </jnt-tab>
  </jnt-tabs>

</jnt-container>
