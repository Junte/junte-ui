<jnt-container>
  <h1>Modal</h1>
  <jnt-stack resources [type]="ui.layout.stack.type.horizontal">
    <jnt-link [icon]="ui.icons.gitlab"
              source="https://gitlab.com/junte/junte-ui/tree/master/projects/junte-ui/src/lib/components/overlays/modal"
              target="_blank" title="GitLab">
    </jnt-link>
    <jnt-link [icon]="ui.icons.figma"
              source="https://www.figma.com/file/EIUNwZCXL9Nm5BKQKl43mfDr/Junte-UI-v1?node-id=1709%3A3466"
              target="_blank" title="Figma">
    </jnt-link>
  </jnt-stack>

  <h3>Playground</h3>
  <jnt-tabs playground>
    <jnt-tab title="Preview" [icon]="localUi.icons.preview">
      <ng-template #tabContentTemplate>
        <jnt-row>
          <jnt-col [tablet]="8">
            <app-browser-preview>
              <ng-template #document>
                <jnt-button (click)="typeControl.value === contentType.templateRef ? openModal() : openCalendar()"
                            text="Open modal"></jnt-button>
                <ng-template #content>
                  <div>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. A accusamus ad animi blanditiis
                    consectetur
                    corporis eligendi enim eveniet ex facere inventore ipsa iusto laboriosam minima minus nesciunt nulla
                    officiis omnis, pariatur perspiciatis placeat provident quae quibusdam quos reiciendis repellat
                    repellendus sit suscipit tempora unde velit veniam vitae voluptatem. Alias atque ea, eligendi enim
                    explicabo impedit, magnam odio possimus rerum sunt vel velit voluptate voluptatem. A adipisci
                    aspernatur, at aut, corporis cum distinctio dolore eligendi est explicabo facilis fuga harum illum
                    impedit ipsam labore odit officiis perferendis provident quae quia quis quisquam recusandae rem
                    repellat sapiente totam, unde. Cum, obcaecati soluta.
                  </div>
                  <jnt-button *ngIf="!closingControl.value && !footerControl.value" text="Cancel" (click)="close()"
                              cancel></jnt-button>
                </ng-template>

                <ng-template #footer>
                  <jnt-stack [type]="ui.stack.type.horizontal" [justify]="ui.flex.justify.center" footer>
                    <jnt-button text="Ok" (click)="close()"></jnt-button>
                  </jnt-stack>
                </ng-template>
              </ng-template>
            </app-browser-preview>
          </jnt-col>
          <jnt-col [tablet]="4">
            <jnt-form [formGroup]="form">

              <jnt-form-item>
                <jnt-form-label for="type">Content type</jnt-form-label>
                <jnt-switcher formControlName="type">
                  <jnt-switcher-option label="TemplateRef" [value]="contentType.templateRef"></jnt-switcher-option>
                  <jnt-switcher-option label="ComponentRef" [value]="contentType.componentRef"></jnt-switcher-option>
                </jnt-switcher>
              </jnt-form-item>

              <jnt-form-item>
                <jnt-form-label for="width">Max width</jnt-form-label>
                <jnt-switcher formControlName="width">
                  <jnt-switcher-option label="800" [value]="size.large"></jnt-switcher-option>
                  <jnt-switcher-option label="400" [value]="size.small"></jnt-switcher-option>
                  <jnt-switcher-option label="600" [value]="size.normal"></jnt-switcher-option>
                </jnt-switcher>
              </jnt-form-item>

              <jnt-form-item>
                <jnt-form-label for="height">Max height</jnt-form-label>
                <jnt-switcher formControlName="height">
                  <jnt-switcher-option label="800" [value]="size.large"></jnt-switcher-option>
                  <jnt-switcher-option label="400" [value]="size.small"></jnt-switcher-option>
                  <jnt-switcher-option label="600" [value]="size.normal"></jnt-switcher-option>
                </jnt-switcher>
              </jnt-form-item>

              <jnt-form-item>
                <jnt-form-control>
                  <jnt-checkbox formControlName="closing" label="Enable closing"></jnt-checkbox>
                </jnt-form-control>
              </jnt-form-item>

              <jnt-form-item>
                <jnt-form-control>
                  <jnt-checkbox formControlName="title" label="Title"></jnt-checkbox>
                </jnt-form-control>
              </jnt-form-item>

              <jnt-form-item>
                <jnt-form-control>
                  <jnt-checkbox formControlName="icon" label="Icon for title"></jnt-checkbox>
                </jnt-form-control>
              </jnt-form-item>

              <jnt-form-item>
                <jnt-form-control>
                  <jnt-checkbox formControlName="footer" label="Footer"></jnt-checkbox>
                </jnt-form-control>
              </jnt-form-item>
            </jnt-form>
          </jnt-col>
        </jnt-row>
      </ng-template>
    </jnt-tab>

    <jnt-tab #code title="Code" [icon]="localUi.icons.code">
      <ng-template #tabContentTemplate>
        <app-how-to-use
          [test]="{selector:'modal-test', type: 'ModalTestComponent'}"
          scss="overlays/modal">
          <ng-template #behaviourTemplate>
            <![CDATA[
            import { FormBuilder } from '@angular/forms';
            import { ModalOptions, ModalService, UI, ModalClosingOption } from 'junte-ui';
            import { ModalTestFactoryComponent } from 'src/components/documentation/overlays/modal/test.component';

            @Component({
            selector: 'app-modal-test',
            templateUrl: './modal-test.component.html',
            styleUrls: ['./modal-test.component.scss']
            })

            export class ModalTestComponent implements OnInit {

            ui = UI;
            ]]>
            <ng-container *ngIf="footerControl.value">
              <![CDATA[
              @ViewChild('footer', {static: false})
              footer: TemplateRef
              <any>;
                ]]>
            </ng-container>
            <ng-container *ngIf="typeControl.value === contentType.templateRef">
              <![CDATA[
              @ViewChild('content', {static: false})
              content: TemplateRef
              <any>;

                constructor(private modalService: ModalService) {
                }

                openModal() {
                const options = new ModalOptions({]]>
                <ng-container *ngIf="widthControl.value">
                  <![CDATA[maxWidth:]]> {{this.widthControl.value}}<![CDATA[,]]>
                </ng-container>
                <ng-container *ngIf="heightControl.value">
                  <![CDATA[maxHeight:]]> {{this.heightControl.value}}<![CDATA[,]]>
                </ng-container>
                <ng-container *ngIf="closingControl.value">
                  <![CDATA[closing: ModalClosingOption.enable,]]>
                </ng-container>
                <ng-container *ngIf="!closingControl.value">
                  <![CDATA[closing: ModalClosingOption.disable,]]>
                </ng-container>

                <ng-container *ngIf="titleControl.value || iconControl.value">
                  <![CDATA[title: {]]>
                  <ng-container *ngIf="titleControl.value">
                    <![CDATA[ text: 'Modal']]>
                  </ng-container>
                  <ng-container *ngIf="iconControl.value">
                    <![CDATA[ icon: UI.icons.settings]]>
                  </ng-container>
                  <![CDATA[}, ]]>
                </ng-container>

                <ng-container *ngIf="footerControl.value">
                  <![CDATA[footer: this.footer]]>
                </ng-container>
                <![CDATA[
                });
                this.modalService.open(this.content, options);
                }
                ]]>
            </ng-container>
            <ng-container *ngIf="typeControl.value === contentType.componentRef">
              <![CDATA[
              constructor(private modalService: ModalService,
              private injector: Injector,
              private cfr: ComponentFactoryResolver) {
              }
              openModal() {
              const options = new ModalOptions({]]>
              <ng-container *ngIf="widthControl.value">
                <![CDATA[maxWidth:]]> {{this.widthControl.value}}<![CDATA[,]]>
              </ng-container>
              <ng-container *ngIf="heightControl.value">
                <![CDATA[maxHeight:]]> {{this.heightControl.value}}<![CDATA[,]]>
              </ng-container>
              <ng-container *ngIf="closingControl.value">
                <![CDATA[closing: ModalClosingOption.enable,]]>
              </ng-container>
              <ng-container *ngIf="!closingControl.value">
                <![CDATA[closing: ModalClosingOption.disable,]]>
              </ng-container>

              <ng-container *ngIf="titleControl.value || iconControl.value">
                <![CDATA[title: {]]>
                <ng-container *ngIf="titleControl.value">
                  <![CDATA[ text: 'Calendar']]>
                </ng-container>
                <ng-container *ngIf="iconControl.value">
                  <![CDATA[ icon: UI.icons.calendar]]>
                </ng-container>
                <![CDATA[}, ]]>
              </ng-container>

              <ng-container *ngIf="footerControl.value">
                <![CDATA[footer: this.footer]]>
              </ng-container>
              <![CDATA[
              });
              this.modalService.open(this.content, options);
              }
              ]]>
            </ng-container>
            <![CDATA[
            close() {
            this.modalService.close();
            }
            }
            ]]>
          </ng-template>
        </app-how-to-use>
        <app-code-highlight file="modal-test.template.html">
          <![CDATA[
          <jnt-button (click)="openModal()" text="Open modal"></jnt-button>
          ]]>
          <ng-container *ngIf="typeControl.value === contentType.templateRef">
            <![CDATA[
            <ng-template #content>
              <div>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. A accusamus ad animi blanditiis
                consectetur
                corporis eligendi enim eveniet ex facere inventore ipsa iusto laboriosam minima minus nesciunt nulla
                officiis omnis, pariatur perspiciatis placeat provident quae quibusdam quos reiciendis repellat
                repellendus sit suscipit tempora unde velit veniam vitae voluptatem. Alias atque ea, eligendi enim
                explicabo impedit, magnam odio possimus rerum sunt vel velit voluptate voluptatem. A adipisci
                aspernatur, at aut, corporis cum distinctio dolore eligendi est explicabo facilis fuga harum illum
                impedit ipsam labore odit officiis perferendis provident quae quia quis quisquam recusandae rem
                repellat sapiente totam, unde. Cum, obcaecati soluta.
              </div>
              ]]>
              <ng-container *ngIf="!closingControl.value && !footerControl.value">
                <![CDATA[
                <jnt-button text="Cancel" (click)="close()"></jnt-button>
                ]]>
              </ng-container>
              <![CDATA[
            </ng-template>
            ]]>
          </ng-container>

          <ng-container *ngIf="footerControl.value">
            <![CDATA[
            <ng-template #footer>
              <jnt-stack [type]="ui.stack.type.horizontal" [justify]="ui.flex.justify.center">
                <jnt-button text="Ok" (click)="close()"></jnt-button>
              </jnt-stack>
            </ng-template>
            ]]>
          </ng-container>
        </app-code-highlight>
      </ng-template>
    </jnt-tab>

    <jnt-tab title="API" [icon]="localUi.icons.api">
      <ng-template #tabContentTemplate>
        <app-component-api [target]="modal"></app-component-api>
      </ng-template>
    </jnt-tab>
  </jnt-tabs>
</jnt-container>
