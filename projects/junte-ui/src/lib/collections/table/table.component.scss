@import "jnt-variables";
@import "jnt-functions";
@import "forms/button/button";

@mixin jnt-table($passed: (), $context: null, $strategy: 'changes') {

  $defs: (
    min-height: 200px,
    min-width: 400px
  );

  $vars: $passed;
  $declare: false;

  @if $passed == () or $strategy == 'merge' {
    $vars: recursive-map-merge($defs, $passed);
    $declare: true;
  }

  :host {
    display: block;
    min-width: map-get($vars, min-width);
    padding: $jnt-gutter-normal;

    @include jnt-button((
      sizes: (
        schemes: (
          secondary: (
            inverse-color: $jnt-gray-800-color
          ),
        ),
        normal: (
          padding: 0 $jnt-gutter-small,
        ),
      ),
    ), '&');

    [data-table] {
      margin-left: -$jnt-gutter-normal;
      margin-right: -$jnt-gutter-normal;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      position: relative;
      [data-spinner] {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background-color: rgba($jnt-secondary-background, .6);
        display: flex;
        justify-content: center;
        align-items: center;
        transition: all .3s;
        z-index: 1;
        [data-icon] {
          color: $jnt-primary-text-light-color;
        }
      }
      thead {
        background-color: $jnt-secondary-background;
        .sortable {
          cursor: pointer;
        }
      }
      tbody tr {
        border-bottom: 1px solid $jnt-muted-color;
        background-color: $jnt-primary-background;
        transition: all .3s;
        &[data-nodata] {
          height: map-get($vars, min-height);
          pointer-events: none;
          border-bottom: 0;
          td {
            vertical-align: middle;
            text-align: center;
            [data-icon] {
              font-size: 80px;
              color: $jnt-muted-color;
            }
          }
        }
        &[data-loading] {
          height: map-get($vars, min-height);
          pointer-events: none;
          border-bottom: 0;
        }
        &:hover {
          background-color: $jnt-highlight-background;
        }
        td {
          &[data-action] {
            width: 50px;
            text-align: center;
            [data-menu] {
              [data-button] {
                @include jnt-button((
                  sizes: (
                    normal: (
                      padding: 0 $jnt-gutter-normal,
                    ),
                  ),
                ), '&');
              }
            }
          }
        }
      }
      td, th {
        padding: $jnt-gutter-normal;
        box-sizing: border-box;
      }
    }

    [data-pagination] {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: -$jnt-gutter-normal;
      [data-pages] {
        flex: 1;
      }
    }
  }

}
