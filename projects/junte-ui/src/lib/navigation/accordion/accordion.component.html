<jnt-stack [align]="ui.align.stretch" [gutter]="ui.gutter.none">
  <ng-container *ngFor="let section of sections; let i = index;">
    <a href="#" data-title
       (click)="active == i ? active = null : active = i;changed.emit(active); $event.preventDefault()"
       [attr.active]="active == i">
      <jnt-icon *ngIf="section.icon" [icon]="section.icon"></jnt-icon>
      <span>{{section.title}}</span>

      <jnt-stack data-state [orientation]="ui.orientation.horizontal" [align]="ui.align.center">
        <jnt-spinner *ngIf="section.state === ui.state.loading" [size]="ui.size.small"></jnt-spinner>
        <jnt-icon data-warning *ngIf="section.state === ui.state.warning" [icon]="ui.icons.warning"></jnt-icon>
        <jnt-icon data-chevron [icon]="active == i ? ui.icons.chevronUp : ui.icons.chevronRight"></jnt-icon>
      </jnt-stack>

    </a>
    <div *ngIf="active == i" data-content>
      <ng-container *ngTemplateOutlet="section.accordionContentTemplate"></ng-container>
    </div>
  </ng-container>
</jnt-stack>

