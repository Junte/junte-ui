<jnt-stack [orientation]="orientation"
  [gutter]="spacer"
  [align]="ui.flex.align.stretch"
  [wrap]="ui.flex.wrap.wrap">
  <ng-container *ngFor="let item of items">
    <div data-top [jntSubMenu]="item" [collapsed]="collapsed">
      <div data-item (click)="open(item)">
        <jnt-link data-link
                  [title]="!collapsed ? item.title : null"
                  [icon]="item.icon"
                  [matching]="item.matching"
                  [source]="!item.submenu ? item.link : null"
                  [scheme]="item.scheme"
                  [outline]="ui.outline.transparent"
                  [target]="item.target"
                  (click)="!item.submenu ? selected.emit(item) : null;item.click.emit()">
          <ng-container *ngIf="!collapsed">
            <jnt-badge *ngFor="let badge of item.badges"
                       [value]="badge.value"
                       [text]="badge.text"
                       [position]="ui.position.inline"
                       [color]="badge.color">
            </jnt-badge>
          </ng-container>
        </jnt-link>
        <jnt-icon *ngIf="!!item.submenu"
                  [size]="ui.size.tiny"
                  [icon]="item.opened ? ui.icons.chevronUp : ui.icons.chevronDown"
                  data-toggle>
        </jnt-icon>
      </div>

      <div data-sub [attr.data-opened]="item.opened" jntSubMenuItems>
        <ng-container *ngIf="!!item.submenu; else only">
          <div data-section *ngIf="collapsed">
            <span>
              {{item.title}}
            </span>
          </div>
          <jnt-link data-link *ngFor="let subItem of item.submenu.items"
                    [title]="subItem.title"
                    [icon]="subItem.icon"
                    [matching]="subItem.matching"
                    [source]="subItem.link"
                    [scheme]="subItem.scheme"
                    [target]="subItem.target"
                    (click)="selected.emit(item);item.click.emit()">
            <jnt-badge *ngFor="let badge of subItem.badges"
                       [value]="badge.value"
                       [text]="badge.text"
                       [position]="ui.position.inline"
                       [color]="badge.color">
            </jnt-badge>
          </jnt-link>
        </ng-container>

        <ng-template #only>
          <jnt-link data-link
                    [title]="item.title"
                    [icon]="item.icon"
                    [matching]="item.matching"
                    [source]="item.link"
                    [scheme]="item.scheme"
                    [target]="item.target">
            <jnt-badge *ngFor="let badge of item.badges"
                       [value]="badge.value"
                       [text]="badge.text"
                       [position]="ui.position.inline"
                       [color]="badge.color">
            </jnt-badge>
          </jnt-link>
        </ng-template>
      </div>
    </div>
  </ng-container>
</jnt-stack>
