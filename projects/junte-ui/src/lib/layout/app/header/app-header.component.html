<ng-template #menuTemplate let-menu="menu">
  <div data-menu *ngIf="!!menu">
    <jnt-menu [orientation]="ui.orientation.horizontal"
              [spacer]="ui.gutter.normal"
              (selected)="opened = false">
      <jnt-menu-item *ngFor="let item of menu.items"
                     [title]="item.title"
                     [icon]="item.icon"
                     [matching]="item.matching"
                     [scheme]="item.scheme"
                     [target]="item.target"
                     [link]="item.link">
        <jnt-badge *ngFor="let badge of item.badges"
                   [value]="badge.value"
                   [text]="badge.text"
                   [position]="ui.position.inline"
                   [color]="badge.color"></jnt-badge>
      </jnt-menu-item>
    </jnt-menu>
  </div>
</ng-template>

<ng-container *jntMinFor="ui.breakpoint.desktop">
  <div data-logo data-desktop *ngIf="headerLogoTemplate">
    <ng-container *ngTemplateOutlet="headerLogoTemplate"></ng-container>
  </div>

  <ng-container
    *ngTemplateOutlet="menuTemplate;context:{menu: menu}"></ng-container>

  <jnt-stack data-actions [type]="ui.orientation.horizontal"
             [gutter]="ui.gutter.small"
             [align]="ui.flex.align.stretch">
    <div data-content *ngIf="contentTemplate">
      <ng-container *ngTemplateOutlet="contentTemplate"></ng-container>
    </div>
    <ng-container *ngTemplateOutlet="headerActionsTemplate"></ng-container>
    <ng-container *ngTemplateOutlet="headerUserbarTemplate"></ng-container>
  </jnt-stack>
</ng-container>

<ng-container *jntMaxFor="ui.breakpoint.tablet">
  <div data-logo data-tablet *ngIf="headerLogoTemplate">
    <ng-container *ngTemplateOutlet="headerLogoTemplate"></ng-container>
  </div>
  <jnt-stack data-actions [type]="ui.orientation.horizontal"
             [gutter]="ui.gutter.small"
             [align]="ui.flex.align.stretch">
    <ng-container *ngTemplateOutlet="headerActionsTemplate"></ng-container>
    <jnt-button data-burger
                [icon]="opened ? ui.icons.cancel : ui.icons.menu"
                [outline]="ui.outline.transparent"
                [jntPopover]="{
                  contentTemplate: dropdownTemplate,
                  trigger: ui.overlays.popover.trigger.click,
                  position: ui.overlays.popover.position.fixed
                }">
    </jnt-button>
    <ng-template #dropdownTemplate>
      <ng-container *ngTemplateOutlet="headerUserbarTemplate"></ng-container>
      <ng-container
        *ngTemplateOutlet="menuTemplate;context:{menu: menu, orientation: ui.orientation.vertical}"></ng-container>
      <div *ngIf="!!contentTemplate" data-content>
        <ng-container *ngTemplateOutlet="contentTemplate"></ng-container>
      </div>
    </ng-template>
  </jnt-stack>
</ng-container>

