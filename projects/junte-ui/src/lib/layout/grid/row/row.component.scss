@import "jnt-variables";
@import "jnt-functions";

@mixin col-gutter($gutter) {
  & {
    margin-top: -$gutter;
    > :not(router-outlet) {
      margin-top: $gutter;
    }
  }
}

@mixin jnt-grid-row($passed: (), $context: null, $strategy: 'changes') {

  $defs: (
    gutters: (
      tiny: $jnt-gutter-tiny,
      small: $jnt-gutter-small,
      normal: $jnt-gutter-normal,
      big: $jnt-gutter-big,
      large: $jnt-gutter-large,
      huge: $jnt-gutter-huge,
    ),
  );

  $vars: $passed;
  $declare: false;

  @if $passed == () or $strategy == 'merge' {
    $vars: recursive-map-merge($defs, $passed);
    $declare: true;
  }

  :host, #{$context} {
    display: flex;
    text-align: left;
    flex-wrap: wrap;
    margin: 0 (-$jnt-gutter-small);

    @if map-has-key($vars, gutters) {
      $gutters: map-get($vars, gutters);
      @each $gutter, $map in $gutters {
        &[data-gutter = '#{$gutter}'] {
          @include col-gutter($map);
        }
      }
    }

    &[data-align='start'] {
      align-items: flex-start;
    }
    &[data-align='center'] {
      align-items: center;
    }
    &[data-align='end'] {
      align-items: flex-end;
    }
    &[data-align='stretch'] {
      align-items: stretch;
    }

    &[data-justify='start'] {
      justify-content: flex-start;
    }
    &[data-justify='center'] {
      justify-content: center;
    }
    &[data-justify='end'] {
      justify-content: flex-end;
    }
    &[data-justify='between'] {
      justify-content: space-between;
    }
    &[data-justify='around'] {
      justify-content: space-around;
    }
    &[data-justify='evenly'] {
      justify-content: space-evenly;
    }
  }
}

@if $jnt-debug {
  @debug 'row compiled';
}
