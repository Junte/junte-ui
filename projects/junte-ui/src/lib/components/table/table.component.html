<ng-template #loadTemplate>
  <jnt-spinner></jnt-spinner>
</ng-template>

<button (click)="load()">Reload</button>
<form [formGroup]="filterForm">
  <table>
    <thead>
    <tr>
      <th *ngFor="let column of columns"
          [class.sortable]="!!column.sort"
          (click)="column.sort ? sorting(column.sort) : null">
        <span>
          {{column.title}}
          <i *ngIf="!!sort && sort.value === column.sort"
             [innerHTML]="order.value === 'asc' ? '&#8593;' : '&#8595;'"></i>
        </span>
      </th>
    </tr>
    </thead>

    <tbody>
    <ng-container *ngIf="!progress.loading; else loadTemplate">
      <tr *ngIf="!source.length">
        <td [attr.colspan]="columns.length">
          <p>No data</p>
        </td>
      </tr>
      <tr *ngFor="let row of source; let i = index" [class.even]="!(i % 2)">
        <td *ngFor="let column of columns">
          <ng-container *ngTemplateOutlet="column.cellTemplate;context:row"></ng-container>
        </td>
      </tr>
    </ng-container>
    </tbody>
  </table>

  <ng-container *ngIf="count">
    <div pagination>
      <jnt-pagination [pagesCount]="pagesCount" formControlName="page"></jnt-pagination>
      <jnt-page-size formControlName="pageSize"></jnt-page-size>
    </div>
  </ng-container>
</form>
