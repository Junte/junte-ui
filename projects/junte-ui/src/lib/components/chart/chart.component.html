<table>
  <thead>
  <tr [style.height.px]="heightIndicator" [style.min-height.px]="heightIndicator">
    <th>
      Project
    </th>
    <th colspan="2">
      Loading
    </th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let indicator of indicators" [style.height.px]="heightIndicator" [style.min-height.px]="heightIndicator">
    <td>
      {{indicator.title}}
    </td>
    <td>
      {{indicator.label}}
    </td>
    <td [style.background-color]="indicator.color | lightenDarkenColor : -30">
      {{indicator.value}}%
    </td>
  </tr>
  </tbody>
</table>

<svg [attr.width]="widthMark + widthPoligon" [attr.height]="heightSvg" xmlns="http://www.w3.org/2000/svg">

  <ng-container *ngFor="let indicator of indicators; let i = index; let first = first">
    <polygon [attr.points]="'0 ' + (first ? heightIndicator : heightIndicator * (i + 1)) + ' ' + widthPoligon + ' ' + (first ? 0 : (i - 1 | sumIndicators: indicators) | percentToNumber: heightSvg) + ' ' + widthPoligon + ' ' + ((i | sumIndicators: indicators) | percentToNumber: heightSvg) + ' 0 ' + heightIndicator * (i + 2)"
             [attr.fill]="indicator.color | lightenDarkenColor: 10"></polygon>
    <rect [attr.x]="widthPoligon"
           [attr.y]="first ? 0 : (i - 1 | sumIndicators: indicators) | percentToNumber: heightSvg"
           [attr.width]="widthMark"
           [attr.height]="indicator.value | percentToNumber : heightSvg"
           [attr.fill]="indicator.color">
     </rect>
     <text *ngIf="(indicator.value | percentToNumber: heightSvg) >= 20" dominantBaseline="middle"
           textAnchor="middle"
           [attr.x]="widthPoligon + widthMark/3"
           [attr.y]="first ? ((indicator.value | percentToNumber : heightSvg)/2) : (((i - 1 | sumIndicators: indicators) | percentToNumber: heightSvg) + (indicator.value | percentToNumber : heightSvg)/2)">
       {{indicator.label}}
     </text>
  </ng-container>

</svg>
