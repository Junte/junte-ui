<ng-template #ajaxOptionsTemp>
  <li item *ngFor="let option of ajaxOptions" (click)="optionSelect(option[valueField])">
    {{option[labelField]}}
  </li>
</ng-template>

<ng-template #optionsTemp>
  <li item *ngFor="let option of options" (click)="optionSelect(option[valueField])">
    <jnt-checkbox checkbox [checked]="!!selected[option[valueField]]">
      {{option[labelField]}}
    </jnt-checkbox>
  </li>
</ng-template>

<!--<ng-template #searchTemp>-->
<!--<input input (click)="toggle = !toggle" [ngModel]="q" (ngModelChange)="search$.next($event)">-->
<!--</ng-template>-->

<ng-template #selectedItemsTemp>
  <ul *ngIf="!loading; else loadOptionsTemp" selected>
    <li chips *ngFor="let item of selectedItems">
      <span>{{labels[item]}}</span><button (click)="optionSelect(item)"><jnt-icon close [icon]="ui.icons.close"></jnt-icon></button>
    </li>
    <li>
      <input input #searchInput (click)="toggle = !toggle" [ngModel]="q" (ngModelChange)="search$.next($event)" jntSmartWidth>
    </li>
  </ul>
</ng-template>

<ng-template #loadTemp>
  <p>Loading data...</p>
</ng-template>

<ng-template #loadOptionsTemp>
  <jnt-spinner></jnt-spinner>
</ng-template>

<ng-template #itemsNotFoundTemp>
  <li message *ngIf="!!q && !options.length">Items not found</li>
</ng-template>

<div selectize (click)="input.focus(); toggle = !toggle;">
  <ng-container *ngTemplateOutlet="selectedItemsTemp"></ng-container>
  <jnt-icon icon [icon]="ui.icons.sortDown"></jnt-icon>
</div>
<ng-container *ngIf="!!toggle">
    <ng-container [ngIf]="loading" *ngTemplateOutlet="loadTemp"></ng-container>
    <div options>
      <ul>
        <ng-container *ngTemplateOutlet="itemsNotFoundTemp"></ng-container>
        <ng-container *ngTemplateOutlet="optionsTemp"></ng-container>
        <ng-container *ngTemplateOutlet="ajaxOptionsTemp"></ng-container>
      </ul>
    </div>
</ng-container>

<ng-content></ng-content>
