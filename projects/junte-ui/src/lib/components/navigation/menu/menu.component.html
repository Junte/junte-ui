<jnt-stack [type]="type" [gutter]="spacer"
           [align]="ui.flex.align.stretch"
           [wrap]="ui.flex.wrap.wrap">
  <ng-container *ngFor="let submenu of submenus">
    <div submenu jntSubMenu>
      <div title (click)="submenu.opened = !submenu.opened"
           [attr.opened]="submenu.opened">
        <jnt-stack [type]="ui.layout.stack.type.horizontal"
                   [align]="ui.flex.align.center">
          <jnt-icon icon *ngIf="submenu.icon" [icon]="submenu.icon"></jnt-icon>
          <jnt-stack text [type]="ui.layout.stack.type.horizontal"
                     [align]="ui.flex.align.center">
            <span>{{submenu.title}}</span>
            <jnt-stack *ngIf="!!submenu.badges.length"
                       [type]="ui.layout.stack.type.horizontal"
                       [align]="ui.flex.align.center"
                       [gutter]="ui.gutter.small">
              <jnt-badge badge *ngFor="let badge of submenu.badges"
                         [value]="badge.value"
                         [position]="ui.position.inline"
                         [color]="badge.color"></jnt-badge>
            </jnt-stack>
          </jnt-stack>
          <jnt-icon toggle *ngIf="type == ui.orientation.horizontal"
                    [icon]="submenu.opened ? ui.icons.chevronUp : ui.icons.chevronDown"></jnt-icon>
        </jnt-stack>
      </div>

      <div submenuItems jntSubMenuItems>
        <div submenuTitle>{{submenu.title}}</div>
        <ng-container *ngFor="let submenuItem of submenu.menuItems">
          <jnt-link link submenuItem (click)="submenuItem.click.emit($event)"
                    [matching]="submenuItem.matching"
                    [source]="submenuItem.link"
                    [icon]="submenuItem.icon"
                    [scheme]="submenuItem.scheme"
                    [title]="submenuItem.title"
                    [target]="submenuItem.target">
            <jnt-badge *ngFor="let badge of submenuItem.badges"
                       [value]="badge.value"
                       [position]="ui.position.inline"
                       [color]="badge.color">
            </jnt-badge>
          </jnt-link>
        </ng-container>
      </div>
    </div>
  </ng-container>

  <ng-container *ngFor="let item of items">
    <div submenu jntSubMenu>
      <jnt-link link (click)="item.click.emit($event)"
                [title]="item.title"
                [icon]="item.icon"
                [matching]="item.matching"
                [source]="item.link"
                [scheme]="item.scheme"
                [target]="item.target">
        <jnt-badge *ngFor="let badge of item.badges"
                   [value]="badge.value"
                   [position]="ui.position.inline"
                   [color]="badge.color"></jnt-badge>
      </jnt-link>
      <div submenuItems jntSubMenuItems>
        <jnt-link submenuTitle only [source]="item.link"
                  [scheme]="item.scheme"
                  [title]="item.title"
                  [target]="item.target">
          <jnt-badge *ngFor="let badge of item.badges"
                     [value]="badge.value"
                     [position]="ui.position.inline"
                     [color]="badge.color"></jnt-badge>
        </jnt-link>
      </div>
    </div>

  </ng-container>
</jnt-stack>
