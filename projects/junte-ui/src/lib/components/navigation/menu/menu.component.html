<jnt-stack [type]="type" [gutter]="spacer"
           [align]="ui.flex.align.stretch"
           [wrap]="ui.flex.wrap.wrap">
  <ng-container *ngFor="let item of items">
    <div (click)="item.opened = !item.opened" top-level>
      <jnt-link link
                [title]="item.title"
                [icon]="item.icon"
                [matching]="item.matching"
                [source]="!item.submenus.length ? item.link : null"
                [scheme]="item.scheme"
                [outline]="ui.outline.transparent"
                [target]="item.target">
        <ng-container *ngIf="!collapsed">
          <jnt-badge *ngFor="let badge of item.badges"
                     [value]="badge.value"
                     [position]="ui.position.inline"
                     [color]="badge.color">
          </jnt-badge>
        </ng-container>
      </jnt-link>
      <jnt-icon *ngIf="!!item.submenus.length"
                [size]="ui.size.tiny"
                [icon]="item.opened ? ui.icons.chevronUp : ui.icons.chevronDown">
      </jnt-icon>

      <div *ngIf="!!item.submenus.length" [attr.opened]="item.opened" submenu>
        <ng-container *ngFor="let submenu of item.submenus">
          <jnt-link *ngFor="let subitem of submenu.items"
                    [title]="subitem.title"
                    [icon]="subitem.icon"
                    [matching]="subitem.matching"
                    [source]="subitem.link"
                    [scheme]="subitem.scheme"
                    [target]="subitem.target"
                    link>
            <jnt-badge *ngFor="let badge of subitem.badges"
                       [value]="badge.value"
                       [position]="ui.position.inline"
                       [color]="badge.color">
            </jnt-badge>
          </jnt-link>
        </ng-container>
      </div>
    </div>
  </ng-container>
</jnt-stack>
