<jnt-stack [type]="type"
           [gutter]="spacer"
           [align]="ui.flex.align.stretch"
           [wrap]="ui.flex.wrap.wrap">
  <ng-container *ngFor="let item of items">
    <div top [jntSubMenu]="item" [collapsed]="collapsed">
      <div item (click)="item.opened = !item.opened">
        <jnt-link link
                  [title]="!collapsed ? item.title : null"
                  [icon]="item.icon"
                  [matching]="item.matching"
                  [source]="!item.submenus.length ? item.link : null"
                  [scheme]="item.scheme"
                  [outline]="ui.outline.transparent"
                  [target]="item.target"
                  (click)="item.click.emit()">
          <ng-container *ngIf="!collapsed">
            <jnt-badge *ngFor="let badge of item.badges"
                       [value]="badge.value"
                       [position]="ui.position.inline"
                       [color]="badge.color">
            </jnt-badge>
          </ng-container>
        </jnt-link>
        <jnt-icon *ngIf="!!item.submenus.length"
                  [size]="ui.size.tiny"
                  [icon]="item.opened ? ui.icons.chevronUp : ui.icons.chevronDown"
                  toggle>
        </jnt-icon>
      </div>

      <div sub [attr.opened]="item.opened" jntSubMenuItems>
        <ng-container *ngFor="let submenu of item.submenus">
          <div title *ngIf="collapsed">
            <span>
              {{item.title}}
            </span>
          </div>
          <jnt-link link *ngFor="let subitem of submenu.items"
                    [title]="subitem.title"
                    [icon]="subitem.icon"
                    [matching]="subitem.matching"
                    [source]="subitem.link"
                    [scheme]="subitem.scheme"
                    [target]="subitem.target"
                    (click)="item.click.emit()">
            <jnt-badge *ngFor="let badge of subitem.badges"
                       [value]="badge.value"
                       [position]="ui.position.inline"
                       [color]="badge.color">
            </jnt-badge>
          </jnt-link>
        </ng-container>
      </div>
    </div>
  </ng-container>
</jnt-stack>
