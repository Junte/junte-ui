<ng-container *ngIf="externalLink; else internalLinkTemplate">
  <ng-container *ngIf="!!source; else emptySourceTemplate">
    <a link [href]="source" [target]="'_' + target">
      <ng-container *ngTemplateOutlet="linkTemplate"></ng-container>
    </a>
  </ng-container>
  <ng-template #emptySourceTemplate>
    <a link>
      <ng-container *ngTemplateOutlet="linkTemplate"></ng-container>
    </a>
  </ng-template>
</ng-container>

<ng-template #internalLinkTemplate>
  <a link [routerLink]="source" #link="routerLinkActive" routerLinkActive
     [routerLinkActiveOptions]="{exact: matching === urlMatching.fullMatch}"
     [attr.active]="link.isActive">
    <ng-container *ngTemplateOutlet="linkTemplate"></ng-container>
  </a>
</ng-template>

<ng-template #linkTemplate>
  <jnt-stack [type]="ui.layout.stack.type.horizontal"
             [gutter]="ui.gutter.tiny"
             [align]="ui.flex.align.center">
    <jnt-icon *ngIf="icon" [icon]="icon"></jnt-icon>
    <div title>{{title}}</div>
    <jnt-stack *ngIf="badges.length"
               [type]="ui.layout.stack.type.horizontal"
               [gutter]="ui.gutter.tiny">
      <jnt-badge badge *ngFor="let badge of badges"
                 [text]="badge.text"
                 [value]="badge.value"
                 [color]="badge.color"
                 [position]="ui.position.inline">
      </jnt-badge>
    </jnt-stack>
  </jnt-stack>
</ng-template>
