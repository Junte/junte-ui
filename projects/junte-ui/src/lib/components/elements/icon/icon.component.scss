@import "variables";

@mixin icon-size($size, $vars) {
  &[type='font'] {
    [icon] {
      @if $size != 'auto' {
        font-size: map-get($vars, size);
      }
    }
  }
  &[type='svg'], &[type='animated'] {
    [icon] {
      width: map-get($vars, size);
      height: map-get($vars, size);
    }
  }
}

@mixin icon($passed: (), $context: null, $strategy: 'merge') {
  $defs: (
    color: null,
    size: null,
    sizes: (
      auto: (
        size: 22px,
      ),
      tiny: (
        size: 11px,
      ),
      small: (
        size: 13px,
      ),
      normal: (
        size: 16px,
      ),
      large: (
        size: 20px,
      )
    )
  );

  $vars: $passed;

  @if $strategy == 'merge' {
    $vars: map-merge($defs, $passed);
  }

  :host, #{$context} {
    @if $strategy == 'merge' {
      display: inline-block;
      vertical-align: middle;
    }

    &[type='font'] {
      [icon] {
        font-size: map-get($vars, size);
        color: map-get($vars, color);
      }
    }

    &[type='svg'], &[type='animated'] {
      [icon] {
        fill: map-get($vars, color);
        width: map-get($vars, size);
        height: map-get($vars, size);
      }
    }

    @if map-has-key($vars, sizes) {
      @each $size, $map in map-get($vars, sizes) {
        &[size='#{$size}'] {
          @include icon-size($size, $map);
        }
      }
    }
  }
}
