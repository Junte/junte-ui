<jnt-form [formGroup]="form">
    <jnt-input *jntMinFor="ui.breakpoint.tablet" data-input
               [placeholder]="placeholder || ''" formControlName="input"
               [jntPopover]="{
                 contentTemplate: calendarTemplate,
                 trigger: ui.overlays.popover.trigger.click,
                 features: [ui.feature.dropdown],
                 minWidth: '300px'
               }"
               (attached)="reference.popover = $event"
               [icon]="ui.icons.calendar">
    </jnt-input>

  <jnt-input *jntFor="ui.breakpoint.mobile" data-input
             [placeholder]="placeholder || ''" formControlName="input"
             [icon]="ui.icons.calendar"
             (click)="opened = !opened">
  </jnt-input>

    <ng-template #calendarTemplate>
      <jnt-stack data-dropdown [type]="ui.layout.stack.type.horizontal" [align]="ui.flex.align.center" [gutter]="ui.gutter.none">
        <jnt-calendar data-calendar formControlName="calendar"></jnt-calendar>
        <div *ngIf="features | includes : datePickerFeatures.clock" time-picker class="timePicker">
          <div time-panel>
            <jnt-stack [type]="ui.layout.stack.type.horizontal" time>
              <div selected-time>
                <span
                  [attr.active]="currentView === clockType.hours"
                  (click)="setCurrentView(clockType.hours)">{{hours | timeFormat}}:</span>
                <span
                  [attr.active]="currentView === clockType.minutes"
                  (click)="setCurrentView(clockType.minutes)">{{minutes * 5 | timeFormat}}</span>
              </div>
              <div ampm>
                <span am [attr.active]="timeMeridian === 'AM'"
                      (click)="setMeridian('AM')">AM</span>
                <span pm [attr.active]="timeMeridian === 'PM'"
                      (click)="setMeridian('PM')">PM</span>
              </div>
            </jnt-stack>
          </div>
          <div clock>
            <ng-container *ngIf="currentView === clockType.hours">
              <div hours *ngFor="let hour of (12 | mockArray:1)"
                   [style.left.px]="hour | styleTop"
                   [style.top.px]="hour | styleLeft"
                   (click)="writeHour(hour)">
                {{hour}}
              </div>
            </ng-container>
            <ng-container *ngIf="currentView === clockType.minutes">
              <div minutes *ngFor="let minute of (12 | mockArray)"
                   [style.left.px]="minute | styleTop"
                   [style.top.px]="minute | styleLeft"
                   (click)="writeMinutes(minute)">
                {{minute * 5}}
              </div>
            </ng-container>
          </div>
        </div>
      </jnt-stack>
    </ng-template>

  <ng-container *ngIf="mobile">
    <ng-container *ngTemplateOutlet="calendarTemplate"></ng-container>
  </ng-container>
</jnt-form>
