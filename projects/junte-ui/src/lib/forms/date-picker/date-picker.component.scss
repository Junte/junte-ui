@import 'jnt-variables';
@import 'layout/responsive/responsive';
@import 'overlays/popover/popover';
@import 'forms/input/input';

@mixin jnt-date-picker($passed: (), $context: null, $deep: false, $strategy: 'changes') {

  $defs: ();

  $vars: $passed;
  $declare: false;
  $wrapper: null;

  @if $deep {
    $wrapper: '::ng-deep';
  }

  @if $passed == () or $strategy == 'merge' {
    $vars: recursive-map-merge($defs, $passed);
    $declare: true;
  }

  :host, #{$context} {
    display: inline-block;
    min-width: 200px;
    &[data-width='fluid'] {
      width: 100%;
    }
    @include for-mobile() {
      border: 1px solid $jnt-control-border-color;
      border-radius: $jnt-corner-small;
      &[calendar-opened='true'] {
        #{$wrapper} [data-calendar-dropdown] {
          display: block;
        }
      }
      &[time-opened='true'] {
        #{$wrapper} [data-time-dropdown] {
          display: flex;
        }
      }
    }
  }

  @include for-mobile() {
    #{$context} #{$wrapper} [data-input] {
      @include jnt-input((
        scheme: (
          normal: (
            border-color: transparent,
            hover: (
              border-color: transparent
            ),
            focus: (
              border-color: transparent,
              shadow: none
            ),
          )
        )
      ), '&');
    }
  }

  #{$context} #{$wrapper} [data-calendar-dropdown] {
    flex: 1;
    padding: $jnt-gutter-normal;

    @include for-mobile() {
      padding: 0;
      display: none;
    }
  }

  #{$context} #{$wrapper} [data-time-dropdown] {
    padding: $jnt-gutter-normal;

    [data-time-col] {
      width: 70px;
    }

    @include for-mobile() {
      display: none;
    }

    @include jnt-input((
      sizes: (
        small: (
          chevron: 0
        ),
        normal: (
          chevron: 0
        )
      )
    ), null, false, 'merge');
  }
}

@if $jnt-debug {
  @debug 'date-picker compiled';
}
