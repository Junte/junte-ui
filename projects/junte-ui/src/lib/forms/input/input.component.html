<form [formGroup]="form">
  <div data-label *ngIf="!!label">{{label}}</div>
  <jnt-stack data-content [orientation]="ui.orientation.horizontal" [gutter]="ui.gutter.small" [align]="ui.flex.align.center">
    <jnt-icon data-label-icon *ngIf="!!icon && !label && !multiline"
              [icon]="icon"></jnt-icon>

    <input #input *ngIf="!!mask; else inputTemplate"
           formControlName="formatted"
           type="string"
           (focusin)="focused = true"
           (focusout)="focused = false"
           [placeholder]="placeholder"
           [readonly]="readonly ? readonly : null"
           (keydown)="keydownMask($event)">

    <ng-template #inputTemplate>
      <input *ngIf="!multiline; else textareaTemplate"
             formControlName="input"
             [type]="type === inputType.password && view.password.display ? inputType.text : type"
             [placeholder]="placeholder"
             [readonly]="readonly ? readonly : null"
             [autocomplete]="autocomplete"
             [min]="min"
             [max]="max"
             (focusin)="focused = true"
             (focusout)="focused = false"
             (blur)="blur()"
             (keydown)="keydown($event)"
             (keyup)="keyup()">
    </ng-template>

    <ng-template #textareaTemplate>
      <textarea formControlName="input"
                [placeholder]="placeholder"
                [attr.rows]="rows"
                (focusin)="focused = true"
                (focusout)="focused = false">
      </textarea>
    </ng-template>

    <div data-loading *ngIf="state === inputState.loading">
      <jnt-spinner data-spinner></jnt-spinner>
    </div>

    <div data-warning *ngIf="state === inputState.warning">
      <jnt-icon [icon]="ui.icons.warning"></jnt-icon>
    </div>

    <div data-checked *ngIf="state === inputState.checked">
      <jnt-icon [icon]="ui.icons.checked"></jnt-icon>
    </div>

    <button data-view *ngIf="type === inputType.password"
            (click)="view.password.display = !view.password.display" tabindex="-1">
      <jnt-icon [icon]="view.password.display ? ui.icons.viewHide : ui.icons.view"></jnt-icon>
    </button>

    <button data-reset *ngIf="!!features && features.includes(feature.clear)"
            (click)="inputControl.reset()">
      <jnt-icon [icon]="ui.icons.cancel"></jnt-icon>
    </button>

  </jnt-stack>

  <div data-arrows *ngIf="type === inputType.number">
    <button [disabled]="inputControl.disabled" (click)="up()" tabindex="-1">
      <jnt-icon [icon]="ui.icons.chevronUp"></jnt-icon>
    </button>
    <button [disabled]="inputControl.disabled" (click)="down()" tabindex="-1">
      <jnt-icon [icon]="ui.icons.chevronDown"></jnt-icon>
    </button>
  </div>

</form>
