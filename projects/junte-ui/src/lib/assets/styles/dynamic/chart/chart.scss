@import "jnt-variables";
@import "elements/icon/icon";

@mixin jnt-chart($passed: (), $context: null, $strategy: 'changes') {

  jnt-chart[host=#{$jnt-chart-host}], #{$context} {
    display: flex;
    box-shadow: $jnt-shadow-normal;
    border-radius: $jnt-corner-normal;
    background-color: $jnt-secondary-background;
  }

  #{$context} [data-wrapper][child-of=#{$jnt-chart-host}] {
    flex: 1;

    table[child-of=#{$jnt-chart-host}] {
      border-spacing: 0;
      width: 100%;
      td[child-of=#{$jnt-chart-host}], th[child-of=#{$jnt-chart-host}] {
        text-align: left;
        vertical-align: middle;
        padding: 0 $jnt-gutter-small;
        &:first-child {
          padding: 0 $jnt-gutter-large;
        }
      }
      thead[child-of=#{$jnt-chart-host}] {
        background-color: $jnt-secondary-background;
        th[child-of=#{$jnt-chart-host}]:first-child {
          border-top-left-radius: $jnt-corner-normal;
        }
        th[child-of=#{$jnt-chart-host}]:last-child {
          border-top-right-radius: $jnt-corner-normal;
        }
      }
      tbody[child-of=#{$jnt-chart-host}] {
        tr[child-of=#{$jnt-chart-host}] {
          cursor: pointer;
          position: relative;
          &:hover, &[selected='true'] {
            td[child-of=#{$jnt-chart-host}] {
              background-color: $jnt-secondary-background;
            }
          }
          &:not(:last-child) {
            td[child-of=#{$jnt-chart-host}]:not(:last-child) {
              border-bottom: 1px solid $jnt-muted-color;
            }
          }
          &:last-child {
            td[child-of=#{$jnt-chart-host}]:first-child {
              border-bottom-left-radius: $jnt-corner-normal;
            }
          }
          &[data-nodata] {
            height: 200px;
            pointer-events: none;
            border-bottom: 0;
            td[child-of=#{$jnt-chart-host}] {
              vertical-align: middle;
              text-align: center;
              [data-icon][child-of=#{$jnt-chart-host}] {
                @include jnt-icon((
                  color: $jnt-muted-color,
                  size: 80px
                ), '&');
              }
            }
            &:last-child {
              td[child-of=#{$jnt-chart-host}]:last-child {
                border-bottom-right-radius: $jnt-corner-normal;
              }
            }
          }
        }
        td[child-of=#{$jnt-chart-host}] {
          background-color: $jnt-primary-background;
          box-sizing: border-box;
          text-overflow: ellipsis;
          white-space: nowrap;
          overflow: hidden;
          min-width: 50px;
          width: 50px;
          max-width: 100px;
          text-align: right;
          user-select: none;
          &:first-child {
            text-align: left;
            min-width: 150px;
            width: 300px;
          }
          &:last-child {
            color: $jnt-gray-900-color;
            text-align: center;
          }
          [data-content][child-of=#{$jnt-chart-host}] {
            overflow: hidden;
          }
        }
      }
    }
  }

  #{$context} svg[child-of=#{$jnt-chart-host}] {
    background-color: $jnt-secondary-background;
    border-top-right-radius: $jnt-corner-normal;
    border-bottom-right-radius: $jnt-corner-normal;
    text[child-of=#{$jnt-chart-host}] {
      fill: $jnt-white-color;
    }
  }
}
