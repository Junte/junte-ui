@import "jnt-variables";

@mixin jnt-gantt($passed: (), $context: null, $strategy: 'changes') {

  $defs: (
    min-height: 200px
  );

  $vars: $passed;
  $declare: false;

  @if $passed == () or $strategy == 'merge' {
    $vars: map-merge($defs, $passed);
    $declare: true;
  }

  jnt-gantt[host=#{$jnt-gantt-host}] {
    display: block;
    box-sizing: border-box;
  }

  table[child-of=#{$jnt-gantt-host}] {
    width: 100%;
    table-layout: fixed;
    thead[child-of=#{$jnt-gantt-host}] {
      tr[child-of=#{$jnt-gantt-host}] {
        &[data-timeline] {
          background-color: $jnt-secondary-background;
        }
        td[child-of=#{$jnt-gantt-host}] {
          &[data-controls] {
            border-right: none;
            padding: $jnt-gutter-normal $jnt-gutter-tiny;
            width: 600px;

            [data-month][child-of=#{$jnt-gantt-host}] {
              display: flex;
              justify-content: space-between;
              align-items: center;
            }

            [data-arrow][child-of=#{$jnt-gantt-host}] {
              background-color: transparent;
              border-width: 0;
              font-size: 1rem;
              color: $jnt-primary-text-color;
              cursor: pointer;
              padding: 0;
              vertical-align: middle;
              border-radius: 50%;
              width: 25px;
              height: 25px;
              display: inline-flex;
              justify-content: center;
              align-items: center;
              transition: box-shadow .3s;
              line-height: 0;
              &:focus {
                outline: none;
                box-shadow: $jnt-shadow-primary;
                border: 1px solid $jnt-primary-color;
              }
              &:hover {
                color: $jnt-primary-text-light-color;
                border: 1px solid $jnt-primary-color;
              }
            }
          }

          &[data-day] {
            text-align: center;
            font-size: $jnt-font-size-small;
            padding: $jnt-gutter-normal $jnt-gutter-tiny;

            &[data-current='true'] {
              color: $jnt-white-color;
              background-color: $jnt-primary-color;
            }
            &[data-weekend='true'] {
              background-color: $jnt-secondary-dark-color;
            }
          }
          &[data-gutter] {
            width: 4px;
          }
        }
      }
    }

    tbody[child-of=#{$jnt-gantt-host}] {
      tr[child-of=#{$jnt-gantt-host}] {
        &[data-nodata] {
          height: map-get($vars, min-height);
          pointer-events: none;
          border-bottom: 0;

          td[child-of=#{$jnt-gantt-host}] {
            vertical-align: middle;
            text-align: center;

            [data-icon][child-of=#{$jnt-gantt-host}] {
              font-size: 80px;
              color: $jnt-muted-color;
            }
          }
        }

        &[data-loading] {
          pointer-events: none;
          border-bottom: 0;
          td[child-of=#{$jnt-gantt-host}] {
            padding: $jnt-gutter-normal;
          }
        }

        &:last-child {
          td[child-of=#{$jnt-gantt-host}] {
            border-bottom: 0;
          }
        }
      }

      td[child-of=#{$jnt-gantt-host}] {
        border-bottom: 1px solid $jnt-gray-400-color;
        border-right: 1px solid $jnt-gray-400-color;
        padding: $jnt-gutter-tiny;
        height: 59px;
        box-sizing: border-box;

        &:last-child {
          border-right: 0;
        }

        &[data-empty] {
          border: none;
        }

        &[data-gutter] {
          border-right: 0;
        }
      }
    }
  }
}
